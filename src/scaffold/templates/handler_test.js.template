'use strict';

/**
 * <%= handlerName %>.js.
 * File auto-generated by cloudscript-engine.
 * Minimal mocha-based test over <%= handlerName %> handler.
 *
 * Mock your globals as needed and feel free to modify it.
 */

const assert = require('assert');
const {build_fake_globals} = require("cloudscript-engine");
const <%= handlerName %> = require('<%= relativeSrcPath %>/<%= handlerName %>');

describe('<%= handlerName %>', function () {

    it('should return user display name', async () => {
        const globals = build_fake_globals();
        const DisplayName = "MY_DISPLAY_NAME";
        globals.server.GetUserAccountInfo.returns({
            UserInfo: {
                TitleInfo: {
                    DisplayName
                }
            }
        });
        const <%= lowerCasedHandlerName %> = <%= handlerName %>(globals);
        const args = {}; // Your arguments here
        const context = {}; // Your context here

        const result = <%= lowerCasedHandlerName %>(args, context);

        assert.strictEqual(result, DisplayName); // Place your assertions here
    });

});
